(function(e){function t(t){for(var o,a,i=t[0],u=t[1],c=t[2],m=0,d=[];m<i.length;m++)a=i[m],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var u=n[i];0!==s[u]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},s={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",[n("b-navbar",{attrs:{toggleable:"sm",type:"dark",variant:"info"}},[n("b-navbar-brand",{attrs:{to:"/"}},[e._v("UniqBS")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{to:"/"}},[e._v("Home")]),n("b-nav-item-dropdown",{attrs:{text:"Events"}},e._l(e.events,(function(t){return n("b-dropdown-item",{key:t.id,attrs:{to:"/event/"+t.id+"/"+t.name}},[e._v(" "+e._s(t.name)+" ")])})),1),n("b-nav-item",{attrs:{to:"/books"}},[e._v("Books")])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[e.token?n("b-nav-item",{attrs:{to:"/profile"}},[e._v("Profile")]):n("b-nav-item",{attrs:{to:"/register"}},[e._v("Register")]),e.token?n("b-nav-item",{on:{click:function(t){return e.logout()}}},[e._v("Log Out")]):n("b-nav-item",{attrs:{to:"/login"}},[e._v("Log In")])],1)],1)],1)],1),n("router-view",{staticClass:"stranica"})],1)},r=[],a=n("5530"),i=n("2f62"),u={name:"App",data:function(){return{}},computed:Object(a["a"])({},Object(i["d"])(["token","events"])),mounted:function(){this.fetchEvents(),localStorage.token&&this.setToken(localStorage.token)},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(i["b"])(["fetchEvents"])),Object(i["c"])(["removeToken","setToken"])),{},{logout:function(){this.removeToken(),this.$router.push({name:"Login"})}}),sockets:{error:function(e){alert(e)}}},c=u,l=(n("034f"),n("2877")),m=Object(l["a"])(c,s,r,!1,null,null,null),d=m.exports,f=n("8c4f"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header",{attrs:{subtitle:"Home"}}),n("img",{attrs:{src:"https://cdn-icons-png.flaticon.com/512/440/440692.png",width:"200",alt:"Logo"}})],1)},h=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"naslov"},[n("h1",[e._v("Unique book shop")]),e.subtitle?n("h3",[e._v(e._s(e.subtitle))]):e._e()])},v=[],g={name:"Header",props:{subtitle:String}},k=g,w=(n("f46d"),Object(l["a"])(k,p,v,!1,null,"1fb685d5",null)),j=w.exports,O={name:"Home",components:{Header:j}},_=O,y=Object(l["a"])(_,b,h,!1,null,null,null),E=y.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header",{attrs:{subtitle:"Create account"}}),n("b-form",{on:{submit:e.onSubmit}},[n("b-form-group",{attrs:{label:"Email address:","label-for":"email"}},[n("b-form-input",{attrs:{id:"email",type:"email",placeholder:"Enter email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),n("b-form-group",{attrs:{label:"User Name:","label-for":"name"}},[n("b-form-input",{attrs:{id:"name",placeholder:"Enter name",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[n("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("b-form-checkbox",{attrs:{id:"admin",value:!0,"unchecked-value":!1},model:{value:e.form.admin,callback:function(t){e.$set(e.form,"admin",t)},expression:"form.admin"}},[e._v("Admin")]),n("b-form-checkbox",{attrs:{id:"mod",value:!0,"unchecked-value":!1},model:{value:e.form.mod,callback:function(t){e.$set(e.form,"mod",t)},expression:"form.mod"}},[e._v("Moderator")]),n("br"),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)},B=[],S={name:"Register",components:{Header:j},data:function(){return{form:{email:"",name:"",password:"",admin:!1,mod:!1}}},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["register"])),{},{onSubmit:function(e){e.preventDefault(),this.register(this.form),this.$router.push({name:"Home"})}})},C=S,D=Object(l["a"])(C,P,B,!1,null,"11a8689d",null),x=D.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header",{attrs:{subtitle:"Log In"}}),n("b-form",{on:{submit:e.onSubmit}},[n("b-form-group",{attrs:{label:"User Name:","label-for":"name"}},[n("b-form-input",{attrs:{id:"name",placeholder:"Enter name",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[n("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)},$=[],T={name:"Login",components:{Header:j},data:function(){return{form:{name:"",password:""}}},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["login"])),{},{onSubmit:function(e){e.preventDefault(),this.login(this.form),this.$router.push({name:"Home"})}})},U=T,H=Object(l["a"])(U,I,$,!1,null,"62acb151",null),A=H.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header",{attrs:{subtitle:e.subtitle}}),n("EventDetails")],1)},N=[],L=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[n("b",[e._v("Event:")]),e._v(" "+e._s(e.$route.params.name))]),n("h2",[n("b",[e._v("Date:")]),e._v(" "+e._s(e.eventDetails.date)+" ")]),n("h2",[n("b",[e._v("Time:")]),e._v(" "+e._s(e.eventDetails.time)+" ")]),n("h2",[n("b",[e._v("Host:")]),e._v(" "+e._s(e.eventDetails.name)+" ")]),n("h3",[n("b",[e._v("Desciption:")]),e._v(" "+e._s(e.eventDetails.description)+" ")]),n("h3",[n("b",[e._v("Guests")]),e._v(": "+e._s(e.eventDetails.guests)+" ")]),n("b-form",{on:{submit:e.bookEvent}},[0==e.dismissCountDown?n("b-button",{attrs:{variant:"outline-success",type:"submit"}},[e._v("I'm coming!")]):e._e()],1),n("b-alert",{attrs:{show:e.dismissCountDown,dismissible:"",variant:"success"},on:{dismissed:function(t){e.dismissCountDown=0},"dismiss-count-down":e.countDownChanged}},[e._v(" One seat booked! ")])],1)}),M=[],z={data:function(){return{eventDetails:[],dismissSecs:5,dismissCountDown:0}},computed:Object(a["a"])({},Object(i["d"])(["events"])),watch:{events:function(e,t){var n=this;this.getEvent(this.$route.params.id).then((function(e){n.eventDetails=e}))},$route:function(){var e=this;this.dismissCountDown=0,this.getEvent(this.$route.params.id).then((function(t){e.eventDetails=t}))}},mounted:function(){var e=this;this.getEvent(this.$route.params.id).then((function(t){e.eventDetails=t}))},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["getEvent","eventComing"])),{},{bookEvent:function(e){var t=this;e.preventDefault(),this.eventComing(this.$route.params.id).then((function(e){console.log("res "+e),t.showAlert()}))},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs}})},J=z,R=Object(l["a"])(J,L,M,!1,null,null,null),G=R.exports,V={name:"Department",components:{Header:j,EventDetails:G},data:function(){return{subtitle:""}},watch:{$route:function(){this.subtitle=this.$route.params.name}},mounted:function(){this.subtitle=this.$route.params.name},methods:Object(a["a"])({},Object(i["b"])([]))},F=V,K=Object(l["a"])(F,q,N,!1,null,"3d7f0820",null),Q=K.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header",{attrs:{subtitle:e.subtitle}}),n("BookList")],1)},X=[],Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-pagination",{attrs:{"total-rows":e.books.length,"per-page":e.perPage,"aria-controls":"image-table"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),n("b-table",{ref:"table",attrs:{id:"image-table",hover:"",fixed:"",items:e.bookItems,fields:e.fields,small:"","per-page":e.perPage,"current-page":e.currentPage},on:{"row-clicked":e.rowClicked},scopedSlots:e._u([{key:"cell(isTaken)",fn:function(e){return[e.item.userId>0?n("b-icon",{attrs:{icon:"check-square",variant:"success",scale:"2"}}):n("b-icon",{attrs:{icon:"x-circle",variant:"danger",scale:"2"}})]}}])}),n("b-pagination",{attrs:{"total-rows":e.books.length,"per-page":e.perPage,"aria-controls":"image-table"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},Z=[],ee=(n("d81d"),n("fb6a"),n("caad"),n("2532"),{data:function(){return{fields:["name","description","author",{key:"isTaken",tdClass:"align-middle"}],bookItems:[],currentPage:1,perPage:5}},computed:Object(a["a"])({},Object(i["d"])(["books"])),watch:{currentPage:function(e,t){var n=this;this.books.slice(0,this.currentPage*this.perPage).map((function(e){n.bookItems.includes(e)||n.bookItems.push(e)})),console.log("size je "+this.bookItems.length)},books:function(e,t){var n=this;this.currentPage=1,this.bookItems=[],e.slice((this.currentPage-1)*this.perPage,this.currentPage*this.perPage).map((function(e){n.bookItems.push(e)}))}},mounted:function(){var e=this;this.bookItems=[],this.bookItems=this.books.slice((this.currentPage-1)*this.perPage,this.currentPage*this.perPage).map((function(t){e.bookItems.push(t)}))},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["getBook"])),{},{rowClicked:function(e,t){this.$router.push({name:"SingleBook",params:{id:e.id}})}})}),te=ee,ne=(n("a4a1"),Object(l["a"])(te,Y,Z,!1,null,"09baf306",null)),oe=ne.exports,se={name:"Department",components:{Header:j,BookList:oe},data:function(){return{subtitle:""}},watch:{$route:function(){this.subtitle=this.$route.params.name,this.fetchBooks()}},mounted:function(){this.subtitle="All Books",this.fetchBooks()},methods:Object(a["a"])({},Object(i["b"])(["fetchBooks"]))},re=se,ae=Object(l["a"])(re,W,X,!1,null,"48727ae3",null),ie=ae.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header",{attrs:{subtitle:e.subtitle}}),n("h1",[n("b",[e._v("Book:")]),e._v(" "+e._s(e.bookName))]),n("h2",[n("b",[e._v("Author:")]),e._v(" "+e._s(e.author))]),n("h2",[n("b",[e._v("Description:")]),e._v(" "+e._s(e.description))]),n("h2",[n("b",[e._v("Unique owner:")]),e._v(" "+e._s(e.uniqueOwner))]),n("b-form",{on:{submit:e.removeBookLocal}},[n("b-button",{attrs:{type:"submit",disabled:!(e.currentUser&&e.currentUser.name==e.uniqueOwner),variant:"outline-danger"}},[e._v("Throw away my book!")])],1),n("br"),n("b-form",{on:{submit:e.buyBookLocal}},[n("b-button",{attrs:{disabled:!(0==this.bookOwnerId),variant:"outline-success",type:"submit"}},[e._v("Get this book!")])],1)],1)},ce=[],le=(n("a4d3"),n("e01a"),{name:"Single",components:{Header:j},data:function(){return{image:null,subtitle:"",bookName:"",author:"",description:"",uniqueOwner:"",currentUser:[],bookOwnerId:0}},computed:Object(a["a"])({},Object(i["d"])(["books"])),methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["getItem","getBook","getBookOwner","getCurrentUser","buyBook","removeBook"])),{},{buyBookLocal:function(e){var t=this;e.preventDefault(),this.buyBook({bookId:this.$route.params.id,userId:this.currentUser.id}).then((function(e){t.bookOwnerId=t.currentUser.id}))},removeBookLocal:function(e){var t=this;e.preventDefault(),this.removeBook(this.$route.params.id).then((function(e){t.bookOwnerId=0}))}}),watch:{books:function(e,t){var n=this;this.getBook(this.$route.params.id).then((function(e){console.log(e.userId+" uid sada za 7"),n.bookName=e.name,n.author=e.author,n.description=e.description,0==e.userId?(n.uniqueOwner="Nobody",n.bookOwnerId=0):n.getBookOwner(e.userId).then((function(t){t?(n.uniqueOwner=t.name,n.bookOwnerId=e.userId):(n.uniqueOwner="User not found / deleted",n.bookOwnerId=0)}))}))}},mounted:function(){var e=this;this.getBook(this.$route.params.id).then((function(t){console.log(t),e.bookName=t.name,e.author=t.author,e.description=t.description,0==t.userId?(e.uniqueOwner="Nobody",e.bookOwnerId=0):e.getBookOwner(t.userId).then((function(n){n?(e.uniqueOwner=n.name,e.bookOwnerId=t.userId):(e.uniqueOwner="User not found / deleted",e.bookOwnerId=0)}))})),this.getCurrentUser().then((function(t){e.currentUser=t}))}}),me=le,de=Object(l["a"])(me,ue,ce,!1,null,null,null),fe=de.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"profile"}},[n("Header",{attrs:{subtitle:"My profile"}}),n("b-alert",{attrs:{show:e.dismissCountDown,dismissible:"",variant:"success"},on:{dismissed:function(t){e.dismissCountDown=0},"dismiss-count-down":e.countDownChanged}},[e._v(" User updated! ")]),n("b-form",{on:{submit:e.onSubmit}},[n("b-form-group",{attrs:{label:"User Name:","label-for":"name"}},[n("b-form-input",{attrs:{id:"name",placeholder:"Enter name",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[n("b-form-input",{attrs:{id:"password",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("b-form-group",{attrs:{label:"Email:","label-for":"name"}},[n("b-form-input",{attrs:{id:"email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Update")])],1),n("h1",[e._v("Send message")]),n("b-form",{on:{submit:e.sendEmailLocal}},[n("b-form-input",{attrs:{placeholder:"To:"},model:{value:e.toEmail,callback:function(t){e.toEmail=t},expression:"toEmail"}}),n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Message body...",rows:"3","max-rows":"6"},model:{value:e.bodyEmail,callback:function(t){e.bodyEmail=t},expression:"bodyEmail"}}),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Send")])],1),n("b-alert",{attrs:{show:e.dismissCountDown2,dismissible:"",variant:"success"},on:{dismissed:function(t){e.dismissCountDown2=0},"dismiss-count-down":e.countDownChanged2}},[e._v(" Message sent! ")]),n("h1",[e._v("My inbox")]),n("b-table",{attrs:{hover:"",fixed:"",items:e.items,fields:e.fields,small:""}})],1)},he=[];n("d3b7"),n("159b");window.addEventListener("beforeunload",(function(e){e.preventDefault(),e.returnValue="",console.log("jess")}));var pe={name:"Profile",components:{Header:j},data:function(){return{fields:["time","body"],items:[],toEmail:"",bodyEmail:"",form:{name:"",password:"",email:"",mod:!1,admin:!1},dismissSecs:5,dismissCountDown:0,dismissSecs2:5,dismissCountDown2:0}},computed:Object(a["a"])({},Object(i["d"])(["messages","token"])),watch:{messages:function(e,t){var n=this;this.items=[],console.log("New val je "+e.length+" "+this.items.length),e.forEach((function(e){var t=e.createdAt.substring(0,10)+" "+e.createdAt.substring(11,16)+" H",o={time:t,body:e.body};n.items.push(o)}))}},mounted:function(){var e=this;this.getCurrentUser().then((function(t){e.form=t,e.form.password=""})),this.fetchMessages()},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["updateUser","getCurrentUser","sendEmail","getEmails","getBookOwner","fetchMessages","getUserIdByName"])),{},{onSubmit:function(e){var t=this;e.preventDefault(),this.updateUser(this.form).then((function(e){e&&t.showAlert()}))},sendEmailLocal:function(e){var t=this;e.preventDefault(),this.getUserIdByName(this.toEmail).then((function(e){t.$socket.emit("message",{userId:e,body:t.bodyEmail,token:t.token})}))},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs},countDownChanged2:function(e){this.dismissCountDown2=e},showAlertEmail:function(){this.dismissCountDown2=this.dismissSecs2}})},ve=pe,ge=Object(l["a"])(ve,be,he,!1,null,null,null),ke=ge.exports;o["default"].use(f["a"]);var we=[{path:"/",name:"Home",component:E},{path:"/event/:id/:name",name:"Event",component:Q},{path:"/books",name:"Books",component:ie},{path:"/books/:id",name:"SingleBook",component:fe},{path:"/profile",name:"Profile",component:ke},{path:"/register",name:"Register",component:x},{path:"/login",name:"Login",component:A}],je=new f["a"]({mode:"history",base:"/",routes:we}),Oe=je,_e=n("5f5b"),ye=n("b1e0"),Ee=n("5132"),Pe=n.n(Ee);n("daa8"),n("f9e3"),n("2dd8"),n("e9c4"),n("4de4");o["default"].use(i["a"]);var Be=new i["a"].Store({state:{token:"",events:[],books:[],messages:[]},mutations:{addBook:function(e,t){e.books.push(t)},addMessage:function(e,t){e.messages.push(t)},addBooks:function(e,t){e.books=t},addMessages:function(e,t){e.messages=t},addEvents:function(e,t){e.events=t},addEvent:function(e,t){e.events.push(t)},setToken:function(e,t){e.token=t,localStorage.token=t},removeToken:function(e){e.token="",localStorage.token=""}},actions:{fetchEvents:function(e){var t=e.commit;fetch("/api/events").then((function(e){return e.json()})).then((function(e){return t("addEvents",e)}))},fetchMessages:function(e){var t=e.commit;fetch("/api/messages/user/all",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then((function(e){t("addMessages",e)}))},fetchBooks:function(e){var t=e.commit;fetch("/api/books").then((function(e){return e.json()})).then((function(e){return t("addBooks",e)}))},updateUser:function(e,t){e.commit;return new Promise((function(e,n){fetch("/api/users/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){e(t)}))}))},getCurrentUser:function(e){e.commit;return new Promise((function(e,t){fetch("/api/users/current/data",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then((function(t){e(t)}))}))},getUserIdByName:function(e,t){e.commit;return new Promise((function(e,n){fetch("/api/users/name/".concat(t)).then((function(e){return e.json()})).then((function(t){e(t.id)}))}))},getBook:function(e,t){var n=e.commit,o=e.state;return new Promise((function(e,s){var r=o.books.filter((function(e){return e.id==t}))[0];r?e(r):fetch("/api/books/".concat(t)).then((function(e){return e.json()})).then((function(t){n("addBook",t),e(t)}))}))},getBookOwner:function(e,t){e.commit;return new Promise((function(e,n){fetch("/api/users/".concat(t)).then((function(e){return e.json()})).then((function(t){e(t)}))}))},getEvent:function(e,t){var n=e.commit,o=e.state;return new Promise((function(e,s){var r=o.events.filter((function(e){return e.id==t}))[0];r?e(r):fetch("/api/events/".concat(t)).then((function(e){return e.json()})).then((function(t){n("addEvent",t),e(t)}))}))},sendEmail:function(e,t){e.commit,t.name;var n=t.body;return new Promise((function(e,t){fetch("/api/users/current/data",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then((function(t){var o={userId:t.id,body:n};fetch("/api/messages/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(t){e(t)}))}))}))},buyBook:function(e,t){var n=e.commit,o=t.bookId,s=t.userId;console.log("book id "+o+" user id "+s);var r={userId:s};return new Promise((function(e,t){fetch("/api/books/take/"+o,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(t){console.log("Book bought"),fetch("/api/books").then((function(e){return e.json()})).then((function(e){console.log("updatuj bree "+e),n("addBooks",e)})),e(t)}))}))},eventComing:function(e,t){var n=e.commit;return new Promise((function(e,o){fetch("/api/events/coming/"+t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then((function(t){fetch("/api/events").then((function(e){return e.json()})).then((function(t){n("addEvents",t),e(t)}))}))}))},removeBook:function(e,t){var n=e.commit,o={userId:0};return new Promise((function(e,s){fetch("/api/books/take/"+t,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(t){fetch("/api/books").then((function(e){return e.json()})).then((function(e){n("addBooks",e)})),e(t)}))}))},getEmails:function(e){e.commit;return new Promise((function(e,t){fetch("/api/messages/user/all",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then((function(t){console.log(" duzina"),e(t)}))}))},register:function(e,t){var n=e.commit;fetch("/api_register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return n("setToken",e.token)}))},login:function(e,t){var n=e.commit;fetch("/api_login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.msg?alert(e.msg):n("setToken",e.token)}))},socket_message:function(e,t){var n=e.commit;fetch("/api/messages/user/all",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then((function(e){n("addMessages",e)}))}}});o["default"].use(_e["a"]),o["default"].use(ye["a"]),o["default"].use(new Pe.a({debug:!1,connection:"ws://127.0.0.1:9000/",vuex:{store:Be,actionPrefix:"socket_"}})),o["default"].config.productionTip=!1,new o["default"]({router:Oe,store:Be,render:function(e){return e(d)}}).$mount("#app")},"6e81":function(e,t,n){},"85ec":function(e,t,n){},a4a1:function(e,t,n){"use strict";n("6e81")},e1a6:function(e,t,n){},f46d:function(e,t,n){"use strict";n("e1a6")}});
//# sourceMappingURL=app.57a5509c.js.map